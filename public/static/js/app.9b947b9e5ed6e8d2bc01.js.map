{"version":3,"sources":["webpack:///static/js/app.9b947b9e5ed6e8d2bc01.js","webpack:///./src/components/ChatPanel.vue","webpack:///./src/components/Rooms.vue","webpack:///src/App.vue","webpack:///./src/App.vue?bea9","webpack:///./src/App.vue","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?1422","webpack:///./src/components/HelloWorld.vue","webpack:///src/components/ChatPanel.vue","webpack:///./src/components/ChatPanel.vue?0f8f","webpack:///src/components/Rooms.vue","webpack:///./src/components/Rooms.vue?0bd6","webpack:///src/components/Stats.vue","webpack:///./src/components/Stats.vue?c20d","webpack:///./src/components/Stats.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["webpackJsonp","0","module","exports","1","D0tr","NHnr","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Rooms_injectStyle","Object","defineProperty","value","vue_esm","App","name","methods","logout","_this","this","http","get","then","res","body","localStorage","removeItem","$router","replace","console","log","isShow","getItem","showStats","render","_vm","_h","$createElement","_c","_self","attrs","id","mode","background-color","text-color","active-text-color","index","on","click","_v","_e","staticRenderFns","esExports","selectortype_template_index_0_src_App","normalizeComponent","Component","src_App","vue_resource_es2015","vue_router_esm","lib","lib_default","n","HelloWorld","data","socket","status","form","username","password","onSubmit","post","setItem","emit","userid","action","message","close","catch","err","HelloWorld_render","staticStyle","margin-top","span","offset","ref","model","label-width","label","callback","$$v","$set","expression","type","_s","HelloWorld_staticRenderFns","HelloWorld_esExports","components_HelloWorld","HelloWorld_normalizeComponent","HelloWorld_Component","src_components_HelloWorld","ChatPanel","query","u","r","current_room","msgs","temp_msg","dialog_visible","file_list","max_file_amount","url","created","msg","push","logs","isImage","indexOf","send","tableRowClassName","_ref","row","rowIndex","who","goRooms","handleRemove","file","handleExceed","$message","warning","maxFileAmount","handleSuccess","response","success","handleError","fileList","handleChange","isJPG","raw","isLt2M","size","error","beforeUpload","upload","$refs","submit","ChatPanel_render","text-align","staticClass","round","width","row-class-name","prop","scopedSlots","_u","key","fn","scope","m","src","gutter","$event","preventDefault","visible","update:visible","drag","accept","list-type","limit","file-list","on-remove","on-exceed","on-success","on-error","on-change","before-upload","auto-upload","with-credentials","slot","ChatPanel_staticRenderFns","ChatPanel_esExports","components_ChatPanel","ChatPanel_normalizeComponent","ChatPanel___vue_styles__","ChatPanel_Component","src_components_ChatPanel","Rooms","my_rooms","all_rooms","mounted","join_rooms","allrooms","map","room","_id","enter","roomid","leave","_this2","splice","join","_this3","_this4","Rooms_render","_l","disabled","Rooms_staticRenderFns","Rooms_esExports","components_Rooms","Rooms_normalizeComponent","Rooms___vue_styles__","Rooms_Component","src_components_Rooms","Stats","rooms_amount","user_amount","beforeRouteEnter","to","from","next","user","Error","vm","setData","date","Date","t","toLocaleString","forEach","Stats_render","Stats_staticRenderFns","Stats_esExports","components_Stats","Stats_normalizeComponent","Stats_Component","src_components_Stats","use","router","routes","path","component","beforeEnter","element_ui_common","element_ui_common_default","en","en_default","config","productionTip","a","locale","el","template","components","iBKY","tvR6"],"mappings":"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","file":"static/js/app.9b947b9e5ed6e8d2bc01.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ \"D0tr\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var App = ({\n  name: 'app',\n  methods: {\n    logout: function logout() {\n      var _this = this;\n\n      vue_esm[\"default\"].http.get('/auth/logout').then(function (res) {\n        if (res.body === 'logout success!') {\n          localStorage.removeItem('userid');\n          localStorage.removeItem('current_room');\n          localStorage.removeItem('joined_rooms');\n          localStorage.removeItem('logs');\n          _this.$router.replace('/');\n        } else {\n          console.log('logout failed!');\n        }\n      });\n    },\n    isShow: function isShow() {\n      return localStorage.getItem('userid') !== null;\n    },\n    showStats: function showStats() {\n      this.$router.replace('/stats');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c7b1b87\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-menu',{attrs:{\"mode\":\"horizontal\",\"background-color\":\"#545c64\",\"text-color\":\"#fff\",\"active-text-color\":\"#ffd04b\"}},[(_vm.isShow())?_c('el-menu-item',{attrs:{\"index\":\"1\"},on:{\"click\":_vm.showStats}},[_vm._v(\"Stats\")]):_vm._e(),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"2\"},on:{\"click\":_vm.logout}},[_vm._v(\"Log Out\")])],1),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (esExports);\n// CONCATENATED MODULE: ./src/App.vue\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-resource/dist/vue-resource.es2015.js\nvar vue_resource_es2015 = __webpack_require__(\"ORbq\");\n\n// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.esm.js\nvar vue_router_esm = __webpack_require__(\"/ocq\");\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/lib/index.js\nvar lib = __webpack_require__(\"DmT9\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/HelloWorld.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var HelloWorld = ({\n  data: function data() {\n    //      var socket = socketio('http://localhost:8080');\n    var socket = lib_default()();\n\n    return {\n      socket: socket,\n      status: '',\n      form: {\n        username: '',\n        password: ''\n      }\n    };\n  },\n\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      vue_esm[\"default\"].http.post('/auth/login', { username: this.form.username, password: this.form.password }).then(function (res) {\n        if (res.body === 'login success') {\n          _this.status = 'login success';\n          localStorage.setItem('userid', _this.form.username);\n\n          _this.socket.emit('stats', {\n            userid: _this.form.username,\n            action: 'login',\n            message: ''\n          });\n          _this.socket.close();\n\n          _this.$router.replace('/rooms');\n        } else {\n          _this.status = res.body;\n        }\n      }).catch(function (err) {\n        _this.status = err.message;\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d2a5db86\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\nvar HelloWorld_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticStyle:{\"margin-top\":\"7%\"}},[_c('el-col',{attrs:{\"span\":8,\"offset\":7}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"username\"}},[_c('el-input',{model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"password\"}},[_c('el-input',{model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"Login\")]),_vm._v(\" \"),_c('el-button',[_vm._v(\"Cancel\")])],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.status))])],1)],1)],1)}\nvar HelloWorld_staticRenderFns = []\nvar HelloWorld_esExports = { render: HelloWorld_render, staticRenderFns: HelloWorld_staticRenderFns }\n/* harmony default export */ var components_HelloWorld = (HelloWorld_esExports);\n// CONCATENATED MODULE: ./src/components/HelloWorld.vue\nvar HelloWorld_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar HelloWorld___vue_template_functional__ = false\n/* styles */\nvar HelloWorld___vue_styles__ = null\n/* scopeId */\nvar HelloWorld___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar HelloWorld___vue_module_identifier__ = null\nvar HelloWorld_Component = HelloWorld_normalizeComponent(\n  HelloWorld,\n  components_HelloWorld,\n  HelloWorld___vue_template_functional__,\n  HelloWorld___vue_styles__,\n  HelloWorld___vue_scopeId__,\n  HelloWorld___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_HelloWorld = (HelloWorld_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/uuid/v4.js\nvar v4 = __webpack_require__(\"DtRx\");\nvar v4_default = /*#__PURE__*/__webpack_require__.n(v4);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/ChatPanel.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var ChatPanel = ({\n  data: function data() {\n    //      var socket = socketio('http://localhost:8080', {\n    //        query: {u: localStorage.getItem('userid'), r: localStorage.getItem('current_room')}\n    //      });\n\n    var socket = lib_default()({\n      query: { u: localStorage.getItem('userid'), r: localStorage.getItem('current_room') }\n    });\n\n    return {\n      socket: socket,\n      current_room: localStorage.getItem('current_room'),\n      msgs: [],\n      temp_msg: '',\n      dialog_visible: false,\n      file_list: [],\n      max_file_amount: 1,\n      url: 'https://chat-room-image.s3.us-west-1.amazonaws.com'\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.socket.on('chat', function (msg) {\n      _this.msgs.push(msg);\n    });\n\n    if (!localStorage.getItem('logs')) {\n      localStorage.setItem('logs', {});\n    }\n\n    if (localStorage.getItem('logs')[this.current_room]) {\n      this.msgs = localStorage.getItem('logs')[this.current_room];\n    } else {\n      vue_esm[\"default\"].http.get('v1/logs/' + this.current_room).then(function (res) {\n        _this.msgs = res.data.logs;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  },\n\n  methods: {\n    isImage: function isImage(msg) {\n      return msg.indexOf(this.url) !== -1;\n    },\n    send: function send(temp_msg) {\n      this.socket.emit('chat', temp_msg);\n      this.temp_msg = '';\n    },\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (row.who === localStorage.getItem('userid')) {\n        return 'your-word';\n      }\n      return '';\n    },\n    goRooms: function goRooms() {\n      this.socket.close();\n      this.$router.replace('/rooms');\n    },\n    handleRemove: function handleRemove(file, file_list) {\n      console.log(file);\n    },\n    handleExceed: function handleExceed() {\n      this.$message.warning('Only upload file ' + this.maxFileAmount + ' at a time');\n    },\n    handleSuccess: function handleSuccess(response) {\n      this.$message.success('Upload success');\n      this.socket.emit('chat', response.url);\n    },\n    handleError: function handleError(err, file, fileList) {\n      console.log(err);\n    },\n    handleChange: function handleChange(file, fileList) {\n      var isJPG = file.raw.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('picture must be JPG format!');\n      }\n      if (!isLt2M) {\n        this.$message.error('picture size can not exceed 2MB!');\n      }\n\n      if (!isJPG || !isLt2M) {\n        fileList = [];\n      }\n    },\n    beforeUpload: function beforeUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('picture must be JPG format!');\n      }\n      if (!isLt2M) {\n        this.$message.error('picture size can not exceed 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    upload: function upload() {\n      this.dialog_visible = false;\n      this.$refs.upload.submit();\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-47763d1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChatPanel.vue\nvar ChatPanel_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":22}},[_c('h4',{staticStyle:{\"text-align\":\"left\"}},[_c('i',{staticClass:\"el-icon-star-on\"}),_vm._v(\" \"+_vm._s(_vm.current_room)+\" \"),_c('i',{staticClass:\"el-icon-star-on\"})])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.goRooms}},[_vm._v(\"Go Back\")])],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.msgs,\"row-class-name\":_vm.tableRowClassName}},[_c('el-table-column',{attrs:{\"prop\":\"u\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.isImage(scope.row.m))?_c('img',{staticClass:\"chat-img\",attrs:{\"src\":scope.row.m}}):_c('div',[_vm._v(_vm._s(scope.row.m))])]}}])})],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('form',{ref:\"form\",attrs:{\"id\":\"fix-form\"},on:{\"submit\":function($event){$event.preventDefault();_vm.send(_vm.temp_msg)}}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.temp_msg),callback:function ($$v) {_vm.temp_msg=$$v},expression:\"temp_msg\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":function($event){_vm.send(_vm.temp_msg)}}},[_vm._v(\"Send\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":function($event){_vm.dialog_visible = true}}},[_c('i',{staticClass:\"el-icon-picture-outline\"})])],1)],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialog_visible,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.dialog_visible=$event}}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"/v1/test\",\"accept\":\"image/jpeg\",\"list-type\":\"picture\",\"name\":\"uploadimg\",\"limit\":_vm.max_file_amount,\"file-list\":_vm.file_list,\"on-remove\":_vm.handleRemove,\"on-exceed\":_vm.handleExceed,\"on-success\":_vm.handleSuccess,\"on-error\":_vm.handleError,\"on-change\":_vm.handleChange,\"before-upload\":_vm.beforeUpload,\"auto-upload\":false,\"with-credentials\":true}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"Drop image here or \"),_c('em',[_vm._v(\"click to upload\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"jpg files with a size less than 2MB\")])]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialog_visible = false}}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.upload}},[_vm._v(\"Confirm\")])],1)],1)],1)}\nvar ChatPanel_staticRenderFns = []\nvar ChatPanel_esExports = { render: ChatPanel_render, staticRenderFns: ChatPanel_staticRenderFns }\n/* harmony default export */ var components_ChatPanel = (ChatPanel_esExports);\n// CONCATENATED MODULE: ./src/components/ChatPanel.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"iBKY\")\n}\nvar ChatPanel_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar ChatPanel___vue_template_functional__ = false\n/* styles */\nvar ChatPanel___vue_styles__ = injectStyle\n/* scopeId */\nvar ChatPanel___vue_scopeId__ = \"data-v-47763d1c\"\n/* moduleIdentifier (server only) */\nvar ChatPanel___vue_module_identifier__ = null\nvar ChatPanel_Component = ChatPanel_normalizeComponent(\n  ChatPanel,\n  components_ChatPanel,\n  ChatPanel___vue_template_functional__,\n  ChatPanel___vue_styles__,\n  ChatPanel___vue_scopeId__,\n  ChatPanel___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_ChatPanel = (ChatPanel_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Rooms.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var Rooms = ({\n  data: function data() {\n    //      var socket = socketio('http://localhost:8080');\n    var socket = lib_default()();\n\n    return {\n      my_rooms: [],\n      all_rooms: [],\n      status: '',\n      socket: socket\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    localStorage.removeItem('current_room');\n    vue_esm[\"default\"].http.get('/v1/rooms/' + localStorage.getItem('userid')).then(function (res) {\n      if (res.data) {\n        _this.my_rooms = res.data.join_rooms;\n        _this.all_rooms = res.data.allrooms.map(function (room) {\n          return room._id;\n        });\n        localStorage.setItem('joined_rooms', _this.my_rooms);\n      }\n    }).catch(function (err) {\n      if (localStorage.getItem('joined_rooms')) {\n        _this.my_rooms = localStorage.getItem('joined_rooms');\n        console.log('load local');\n      }\n    });\n  },\n\n\n  methods: {\n    enter: function enter(roomid) {\n      localStorage.setItem('current_room', roomid);\n      this.socket.close();\n      this.$router.replace('/chat');\n    },\n    leave: function leave(roomid) {\n      var _this2 = this;\n\n      vue_esm[\"default\"].http.post('/v1/room', { action: 'leave', roomid: roomid, userid: localStorage.getItem('userid') }).then(function (res) {\n        if (res.body.roomid) {\n          // delete room from rooms that I joined\n          var index = _this2.my_rooms.indexOf(roomid);\n          _this2.my_rooms.splice(index, 1);\n          localStorage.setItem('joined_rooms', _this2.my_rooms);\n\n          // if this is the room I have entered recently, remove it from localStorage\n          if (localStorage.getItem('current_room') === roomid) {\n            localStorage.removeItem('current_room');\n          }\n\n          // if I am the last one in room, room is deleted after my leave.\n          if (res.body.roomid === 'room deleted') {\n            // delete room from all rooms\n            index = _this2.all_rooms.indexOf(roomid);\n            _this2.all_rooms.splice(index, 1);\n          }\n\n          _this2.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'leave room',\n            message: roomid\n          });\n        } else {\n          _this2.status = 'leave room failed';\n          _this2.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'leave room',\n            message: 'failed'\n          });\n        }\n      });\n    },\n    join: function join(roomid) {\n      var _this3 = this;\n\n      vue_esm[\"default\"].http.post('/v1/room', { action: 'enter', roomid: roomid, userid: localStorage.getItem('userid') }).then(function (res) {\n        if (res.body.roomid) {\n          _this3.my_rooms.push(res.body.roomid);\n          localStorage.setItem('joined_rooms', _this3.my_rooms);\n\n          _this3.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'join room',\n            message: roomid\n          });\n        } else {\n          _this3.status = 'join room failed';\n          _this3.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'join room',\n            message: 'failed'\n          });\n        }\n      });\n    },\n    onSubmit: function onSubmit() {\n      var _this4 = this;\n\n      vue_esm[\"default\"].http.post('/v1/room', { action: 'enter', roomid: null, userid: localStorage.getItem('userid') }).then(function (res) {\n        if (res.body.roomid) {\n          _this4.my_rooms.push(res.body.roomid);\n          _this4.all_rooms.push(res.body.roomid);\n          localStorage.setItem('joined_rooms', _this4.my_rooms);\n\n          _this4.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'create a new room',\n            message: res.body.roomid\n          });\n        } else {\n          _this4.status = 'enter new room failed';\n          _this4.socket.emit('stats', {\n            userid: localStorage.getItem('userid'),\n            action: 'enter new room',\n            message: 'failed'\n          });\n        }\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-339177d0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Rooms.vue\nvar Rooms_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-container',[_c('el-aside',{attrs:{\"width\":\"200px\"}},[_c('el-form',{ref:\"form\"},[_vm._v(\"\\n        Create a new room\\n        \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"Create\")])],1)],1)],1),_vm._v(\" \"),_c('el-main',_vm._l((_vm.all_rooms),function(room){return _c('el-col',{key:room},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.my_rooms.indexOf(room) === -1},on:{\"click\":function($event){_vm.enter(room)}}},[_vm._v(_vm._s(room))]),_vm._v(\" \"),(_vm.my_rooms.indexOf(room) !== -1)?_c('el-button',{attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":function($event){_vm.leave(room)}}},[_vm._v(\"Leave Room\")]):_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":function($event){_vm.join(room)}}},[_vm._v(\"Join Room\")])],1)}))],1)],1)}\nvar Rooms_staticRenderFns = []\nvar Rooms_esExports = { render: Rooms_render, staticRenderFns: Rooms_staticRenderFns }\n/* harmony default export */ var components_Rooms = (Rooms_esExports);\n// CONCATENATED MODULE: ./src/components/Rooms.vue\nfunction Rooms_injectStyle (ssrContext) {\n  __webpack_require__(\"D0tr\")\n}\nvar Rooms_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar Rooms___vue_template_functional__ = false\n/* styles */\nvar Rooms___vue_styles__ = Rooms_injectStyle\n/* scopeId */\nvar Rooms___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar Rooms___vue_module_identifier__ = null\nvar Rooms_Component = Rooms_normalizeComponent(\n  Rooms,\n  components_Rooms,\n  Rooms___vue_template_functional__,\n  Rooms___vue_styles__,\n  Rooms___vue_scopeId__,\n  Rooms___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Rooms = (Rooms_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Stats.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var Stats = ({\n  data: function data() {\n    //      var socket = socketio('http://localhost:8080');\n    var socket = lib_default()();\n\n    return {\n      rooms_amount: 0,\n      user_amount: 0,\n      socket: socket,\n      logs: []\n    };\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    vue_esm[\"default\"].http.get('/v1/stats').then(function (res) {\n      if (res.body.logs && res.body.room && res.body.user) {\n        next(function (vm) {\n          return vm.setData(res.body);\n        });\n      } else {\n        throw new Error('missing info in log object');\n      }\n    }).catch(function (err) {\n      console.log(err);\n      console.log('fetch stats failed!');\n      next('/rooms');\n    });\n  },\n  created: function created() {\n    var _this = this;\n\n    this.socket.on('stats', function (msg) {\n      var date = new Date(msg.t);\n      msg.t = date.toLocaleString();\n      _this.logs.push(msg);\n    });\n  },\n\n  methods: {\n    goRooms: function goRooms() {\n      this.socket.close();\n      this.$router.replace('/rooms');\n    },\n    setData: function setData(data) {\n      data.logs.forEach(function (log) {\n        var date = new Date(log.t);\n        log.t = date.toLocaleString();\n        return log;\n      });\n      this.logs = data.logs;\n      this.rooms_amount = data.room;\n      this.user_amount = data.user;\n    }\n  }\n\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51803aa1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Stats.vue\nvar Stats_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-aside',{attrs:{\"width\":\"200px\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.goRooms}},[_vm._v(\"Go Back\")]),_vm._v(\" \"),_c('div',[_vm._v(\"Existed room: \"+_vm._s(_vm.rooms_amount))]),_vm._v(\" \"),_c('div',[_vm._v(\"Existed user: \"+_vm._s(_vm.user_amount))])],1),_vm._v(\" \"),_c('el-main',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.logs}},[_c('el-table-column',{attrs:{\"prop\":\"t\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"u\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"act\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"m\"}})],1)],1)],1)}\nvar Stats_staticRenderFns = []\nvar Stats_esExports = { render: Stats_render, staticRenderFns: Stats_staticRenderFns }\n/* harmony default export */ var components_Stats = (Stats_esExports);\n// CONCATENATED MODULE: ./src/components/Stats.vue\nvar Stats_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar Stats___vue_template_functional__ = false\n/* styles */\nvar Stats___vue_styles__ = null\n/* scopeId */\nvar Stats___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar Stats___vue_module_identifier__ = null\nvar Stats_Component = Stats_normalizeComponent(\n  Stats,\n  components_Stats,\n  Stats___vue_template_functional__,\n  Stats___vue_styles__,\n  Stats___vue_scopeId__,\n  Stats___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Stats = (Stats_Component.exports);\n\n// CONCATENATED MODULE: ./src/router/index.js\n\n\n\n\n\n\n\n\nvue_esm[\"default\"].use(vue_resource_es2015[\"a\" /* default */]);\nvue_esm[\"default\"].use(vue_router_esm[\"a\" /* default */]);\n\n/* harmony default export */ var router = (new vue_router_esm[\"a\" /* default */]({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    name: 'HelloWorld',\n    component: src_components_HelloWorld,\n    beforeEnter: function beforeEnter(to, from, next) {\n      if (localStorage.getItem('userid')) next('/rooms');else next();\n    }\n  }, {\n    path: '/chat',\n    name: 'ChatPanel',\n    component: src_components_ChatPanel,\n    beforeEnter: function beforeEnter(to, from, next) {\n      if (!localStorage.getItem('userid')) next('/');\n      if (!localStorage.getItem('current_room')) next('/rooms');else next();\n    }\n  }, {\n    path: '/rooms',\n    name: 'Rooms',\n    component: src_components_Rooms,\n    beforeEnter: function beforeEnter(to, from, next) {\n      if (!localStorage.getItem('userid')) next('/');else next();\n    }\n  }, {\n    path: '/stats',\n    name: 'Stats',\n    component: src_components_Stats\n  }]\n}));\n// EXTERNAL MODULE: ./node_modules/element-ui/lib/element-ui.common.js\nvar element_ui_common = __webpack_require__(\"zL8q\");\nvar element_ui_common_default = /*#__PURE__*/__webpack_require__.n(element_ui_common);\n\n// EXTERNAL MODULE: ./node_modules/element-ui/lib/theme-chalk/index.css\nvar theme_chalk = __webpack_require__(\"tvR6\");\nvar theme_chalk_default = /*#__PURE__*/__webpack_require__.n(theme_chalk);\n\n// EXTERNAL MODULE: ./node_modules/element-ui/lib/locale/lang/en.js\nvar en = __webpack_require__(\"wUZ8\");\nvar en_default = /*#__PURE__*/__webpack_require__.n(en);\n\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n\nvue_esm[\"default\"].config.productionTip = false;\nvue_esm[\"default\"].use(element_ui_common_default.a, { locale: en_default.a });\n\n/* eslint-disable no-new */\nnew vue_esm[\"default\"]({\n  el: '#app',\n  router: router,\n  template: '<App/>',\n  components: { App: src_App }\n});\n\n/***/ }),\n\n/***/ \"iBKY\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"tvR6\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.9b947b9e5ed6e8d2bc01.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-47763d1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-47763d1c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-47763d1c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChatPanel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-339177d0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Rooms.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Rooms.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-339177d0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Rooms.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Rooms.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <el-menu\n      mode=\"horizontal\"\n      background-color=\"#545c64\"\n      text-color=\"#fff\"\n      active-text-color=\"#ffd04b\">\n      <el-menu-item index=\"1\" v-if=\"isShow()\" v-on:click=\"showStats\">Stats</el-menu-item>\n      <el-menu-item index=\"2\" v-on:click=\"logout\">Log Out</el-menu-item>\n    </el-menu>\n\n    <router-view/>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n\n  export default {\n    name: 'app',\n    methods: {\n      logout() {\n        Vue.http.get('/auth/logout')\n          .then(res => {\n            if(res.body === 'logout success!'){\n              localStorage.removeItem('userid');\n              localStorage.removeItem('current_room');\n              localStorage.removeItem('joined_rooms');\n              localStorage.removeItem('logs');\n              this.$router.replace('/');\n            }\n            else {\n              console.log('logout failed!');\n            }\n          })\n      },\n      isShow(){\n        return localStorage.getItem('userid') !== null;\n      },\n      showStats() {\n        this.$router.replace('/stats');\n      }\n    }\n  }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-menu',{attrs:{\"mode\":\"horizontal\",\"background-color\":\"#545c64\",\"text-color\":\"#fff\",\"active-text-color\":\"#ffd04b\"}},[(_vm.isShow())?_c('el-menu-item',{attrs:{\"index\":\"1\"},on:{\"click\":_vm.showStats}},[_vm._v(\"Stats\")]):_vm._e(),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"2\"},on:{\"click\":_vm.logout}},[_vm._v(\"Log Out\")])],1),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c7b1b87\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c7b1b87\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <el-row style=\"margin-top: 7%;\">\n    <el-col :span=\"8\" :offset=\"7\">\n      <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"username\">\n          <el-input v-model=\"form.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"password\">\n          <el-input v-model=\"form.password\"></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"onSubmit\">Login</el-button>\n          <el-button>Cancel</el-button>\n        </el-form-item>\n\n        <div>{{status}}</div>\n      </el-form>\n    </el-col>\n  </el-row>\n\n</template>\n\n<script>\n  import Vue from 'vue'\n  import socketio from 'socket.io-client'\n\n  export default {\n    data() {\n//      var socket = socketio('http://localhost:8080');\n      var socket = socketio();\n\n      return {\n        socket: socket,\n        status: '',\n        form: {\n          username: '',\n          password: '',\n        }\n      }\n    },\n    methods: {\n      onSubmit() {\n        Vue.http.post('/auth/login', {username: this.form.username, password: this.form.password})\n          .then((res) => {\n            if(res.body === 'login success'){\n              this.status = 'login success';\n              localStorage.setItem('userid', this.form.username);\n\n              this.socket.emit('stats', {\n                userid: this.form.username,\n                action: 'login',\n                message: ''\n              });\n              this.socket.close();\n\n              this.$router.replace('/rooms');\n            }\n            else {\n              this.status = res.body;\n            }\n          })\n          .catch(err => {\n            this.status = err.message;\n          });\n\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticStyle:{\"margin-top\":\"7%\"}},[_c('el-col',{attrs:{\"span\":8,\"offset\":7}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"username\"}},[_c('el-input',{model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"password\"}},[_c('el-input',{model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"Login\")]),_vm._v(\" \"),_c('el-button',[_vm._v(\"Cancel\")])],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.status))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d2a5db86\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d2a5db86\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <el-row>\n      <el-col :span=\"22\">\n        <h4 style=\"text-align: left;\">\n          <i class=\"el-icon-star-on\"></i> {{current_room}} <i class=\"el-icon-star-on\"></i>\n        </h4>\n      </el-col>\n\n      <el-col :span=\"2\">\n        <el-button type=\"success\" @click=\"goRooms\" round>Go Back</el-button>\n      </el-col>\n    </el-row>\n\n\n    <el-table :data=\"msgs\" style=\"width: 100%\" :row-class-name=\"tableRowClassName\">\n      <el-table-column prop=\"u\" width=\"180\"></el-table-column>\n      <el-table-column>\n        <template slot-scope=\"scope\">\n          <img v-if=\"isImage(scope.row.m)\" :src=\"scope.row.m\" class=\"chat-img\"/>\n          <div v-else>{{scope.row.m}}</div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-row :gutter=\"20\">\n      <form ref=\"form\" id=\"fix-form\" v-on:submit.prevent=\"send(temp_msg)\">\n        <el-col :span=\"20\">\n          <el-input v-model=\"temp_msg\"></el-input>\n        </el-col>\n        <el-col :span=\"2\">\n          <el-button @click=\"send(temp_msg)\" round>Send</el-button>\n        </el-col>\n        <el-col :span=\"2\">\n          <el-button @click=\"dialog_visible = true\" round><i class=\"el-icon-picture-outline\"></i></el-button>\n        </el-col>\n      </form>\n    </el-row>\n\n    <!--upload image-->\n    <el-dialog\n      :visible.sync=\"dialog_visible\"\n      width=\"35%\">\n      <el-upload\n        drag\n        class=\"upload-demo\"\n        ref=\"upload\"\n        action=\"/v1/test\"\n        accept=\"image/jpeg\"\n        list-type=\"picture\"\n        name=\"uploadimg\"\n        :limit=\"max_file_amount\"\n        :file-list=\"file_list\"\n        :on-remove=\"handleRemove\"\n        :on-exceed=\"handleExceed\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :on-change=\"handleChange\"\n        :before-upload=\"beforeUpload\"\n        :auto-upload=\"false\"\n        :with-credentials=\"true\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">Drop image here or <em>click to upload</em></div>\n        <div class=\"el-upload__tip\" slot=\"tip\">jpg files with a size less than 2MB</div>\n      </el-upload>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialog_visible = false\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"upload\">Confirm</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import socketio from 'socket.io-client'\n  import Vue from 'vue'\n  import uuid from 'uuid/v4'\n\n  export default {\n    data() {\n//      var socket = socketio('http://localhost:8080', {\n//        query: {u: localStorage.getItem('userid'), r: localStorage.getItem('current_room')}\n//      });\n\n      var socket = socketio({\n        query: {u: localStorage.getItem('userid'), r: localStorage.getItem('current_room')}\n      });\n\n      return {\n        socket: socket,\n        current_room: localStorage.getItem('current_room'),\n        msgs: [],\n        temp_msg: '',\n        dialog_visible: false,\n        file_list: [],\n        max_file_amount: 1,\n        url: 'https://chat-room-image.s3.us-west-1.amazonaws.com'\n      };\n    },\n    created() {\n      this.socket.on('chat', (msg)=> {\n        this.msgs.push(msg);\n      });\n\n      if(!localStorage.getItem('logs')){\n        localStorage.setItem('logs', {});\n      }\n\n      if(localStorage.getItem('logs')[this.current_room]){\n        this.msgs = localStorage.getItem('logs')[this.current_room]\n      }\n      else {\n        Vue.http.get('v1/logs/' + this.current_room)\n          .then(res => {\n            this.msgs = res.data.logs;\n          })\n          .catch(err => {\n            console.log(err);\n          })\n      }\n    },\n    methods: {\n      isImage(msg){\n        return msg.indexOf(this.url) !== -1;\n      },\n\n      send(temp_msg) {\n        this.socket.emit('chat', temp_msg);\n        this.temp_msg = '';\n      },\n\n      tableRowClassName({row, rowIndex}) {\n        if(row.who === localStorage.getItem('userid')){\n          return 'your-word';\n        }\n        return '';\n      },\n\n      goRooms() {\n        this.socket.close();\n        this.$router.replace('/rooms');\n      },\n\n      handleRemove(file, file_list) {\n        console.log(file);\n      },\n\n      handleExceed() {\n        this.$message.warning(`Only upload file ${this.maxFileAmount} at a time`);\n      },\n\n      handleSuccess(response) {\n        this.$message.success('Upload success');\n        this.socket.emit('chat', response.url);\n      },\n\n      handleError(err, file, fileList){\n        console.log(err);\n      },\n\n      handleChange(file, fileList) {\n        const isJPG = file.raw.type === 'image/jpeg';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error('picture must be JPG format!');\n        }\n        if (!isLt2M) {\n          this.$message.error('picture size can not exceed 2MB!');\n        }\n\n        if(!isJPG || !isLt2M){\n          fileList = [];\n        }\n      },\n\n      beforeUpload(file){\n        const isJPG = file.type === 'image/jpeg';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error('picture must be JPG format!');\n        }\n        if (!isLt2M) {\n          this.$message.error('picture size can not exceed 2MB!');\n        }\n        return isJPG && isLt2M;\n      },\n\n      upload(){\n        this.dialog_visible = false;\n        this.$refs.upload.submit();\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .el-table .your-word {\n    background: #a0f9a0;\n  }\n\n  form { background: #000; padding: 3px; position: fixed; bottom: 0; width: 100%; height: 10vh}\n  /*form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }*/\n  /*form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }*/\n\n  .chat-img {\n    width: 250px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChatPanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":22}},[_c('h4',{staticStyle:{\"text-align\":\"left\"}},[_c('i',{staticClass:\"el-icon-star-on\"}),_vm._v(\" \"+_vm._s(_vm.current_room)+\" \"),_c('i',{staticClass:\"el-icon-star-on\"})])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.goRooms}},[_vm._v(\"Go Back\")])],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.msgs,\"row-class-name\":_vm.tableRowClassName}},[_c('el-table-column',{attrs:{\"prop\":\"u\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.isImage(scope.row.m))?_c('img',{staticClass:\"chat-img\",attrs:{\"src\":scope.row.m}}):_c('div',[_vm._v(_vm._s(scope.row.m))])]}}])})],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('form',{ref:\"form\",attrs:{\"id\":\"fix-form\"},on:{\"submit\":function($event){$event.preventDefault();_vm.send(_vm.temp_msg)}}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.temp_msg),callback:function ($$v) {_vm.temp_msg=$$v},expression:\"temp_msg\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":function($event){_vm.send(_vm.temp_msg)}}},[_vm._v(\"Send\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":function($event){_vm.dialog_visible = true}}},[_c('i',{staticClass:\"el-icon-picture-outline\"})])],1)],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialog_visible,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.dialog_visible=$event}}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"/v1/test\",\"accept\":\"image/jpeg\",\"list-type\":\"picture\",\"name\":\"uploadimg\",\"limit\":_vm.max_file_amount,\"file-list\":_vm.file_list,\"on-remove\":_vm.handleRemove,\"on-exceed\":_vm.handleExceed,\"on-success\":_vm.handleSuccess,\"on-error\":_vm.handleError,\"on-change\":_vm.handleChange,\"before-upload\":_vm.beforeUpload,\"auto-upload\":false,\"with-credentials\":true}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"Drop image here or \"),_c('em',[_vm._v(\"click to upload\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"jpg files with a size less than 2MB\")])]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialog_visible = false}}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.upload}},[_vm._v(\"Confirm\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-47763d1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChatPanel.vue\n// module id = null\n// module chunks = ","<template>\n  <el-container>\n    <el-container>\n      <el-aside width=\"200px\">\n        <el-form ref=\"form\">\n          Create a new room\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"onSubmit\">Create</el-button>\n          </el-form-item>\n        </el-form>\n      </el-aside>\n\n      <el-main>\n        <el-col v-for=\"room in all_rooms\" :key=\"room\">\n          <el-button\n            type=\"primary\"\n            v-on:click=\"enter(room)\"\n            v-bind:disabled=\"my_rooms.indexOf(room) === -1\">{{room}}</el-button>\n\n          <el-button\n            type=\"danger\"\n            v-if=\"my_rooms.indexOf(room) !== -1\"\n            v-on:click=\"leave(room)\"\n            round>Leave Room</el-button>\n\n          <el-button\n            type=\"success\"\n            v-else\n            v-on:click=\"join(room)\"\n            round>Join Room</el-button>\n        </el-col>\n      </el-main>\n    </el-container>\n  </el-container>\n\n</template>\n\n<script>\n  import Vue from 'vue'\n  import socketio from 'socket.io-client'\n\n  export default {\n    data () {\n//      var socket = socketio('http://localhost:8080');\n      var socket = socketio();\n\n      return {\n        my_rooms: [],\n        all_rooms: [],\n        status: '',\n        socket: socket\n      }\n    },\n\n    mounted() {\n      localStorage.removeItem('current_room');\n      Vue.http.get('/v1/rooms/'+localStorage.getItem('userid'))\n        .then(res => {\n          if(res.data) {\n            this.my_rooms = res.data.join_rooms;\n            this.all_rooms = res.data.allrooms.map(room => room._id);\n            localStorage.setItem('joined_rooms', this.my_rooms);\n          }\n        })\n        .catch(err => {\n          if(localStorage.getItem('joined_rooms')){\n            this.my_rooms = localStorage.getItem('joined_rooms');\n            console.log('load local');\n          }\n        })\n    },\n\n    methods: {\n      enter(roomid) {\n        localStorage.setItem('current_room',roomid);\n        this.socket.close();\n        this.$router.replace('/chat');\n      },\n\n      leave(roomid) {\n        Vue.http.post('/v1/room', {action: 'leave', roomid: roomid, userid: localStorage.getItem('userid')})\n          .then(res => {\n            if(res.body.roomid){\n              // delete room from rooms that I joined\n              var index = this.my_rooms.indexOf(roomid);\n              this.my_rooms.splice(index,1);\n              localStorage.setItem('joined_rooms', this.my_rooms);\n\n              // if this is the room I have entered recently, remove it from localStorage\n              if(localStorage.getItem('current_room') === roomid){\n                localStorage.removeItem('current_room');\n              }\n\n              // if I am the last one in room, room is deleted after my leave.\n              if(res.body.roomid === 'room deleted'){\n                // delete room from all rooms\n                index = this.all_rooms.indexOf(roomid);\n                this.all_rooms.splice(index,1);\n              }\n\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'leave room',\n                message: roomid\n              });\n            }\n            else {\n              this.status = 'leave room failed';\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'leave room',\n                message: 'failed'\n              });\n            }\n          })\n      },\n\n      join(roomid) {\n        Vue.http.post('/v1/room', {action: 'enter', roomid: roomid, userid: localStorage.getItem('userid')})\n          .then((res) => {\n            if(res.body.roomid){\n              this.my_rooms.push(res.body.roomid);\n              localStorage.setItem('joined_rooms', this.my_rooms);\n\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'join room',\n                message: roomid\n              });\n            }\n            else {\n              this.status = 'join room failed';\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'join room',\n                message: 'failed'\n              });\n            }\n          })\n      },\n\n      onSubmit() {\n        Vue.http.post('/v1/room', {action: 'enter', roomid: null, userid: localStorage.getItem('userid')})\n          .then((res) => {\n            if(res.body.roomid){\n              this.my_rooms.push(res.body.roomid);\n              this.all_rooms.push(res.body.roomid);\n              localStorage.setItem('joined_rooms', this.my_rooms);\n\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'create a new room',\n                message: res.body.roomid\n              });\n            }\n            else {\n              this.status = 'enter new room failed';\n              this.socket.emit('stats', {\n                userid: localStorage.getItem('userid'),\n                action: 'enter new room',\n                message: 'failed'\n              });\n            }\n          });\n      },\n    }\n  }\n</script>\n\n<style>\n  .el-header, .el-footer {\n    background-color: #B3C0D1;\n    color: #333;\n    text-align: center;\n    line-height: 60px;\n  }\n\n  .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n    line-height: 200px;\n  }\n\n  .el-main {\n    background-color: #E9EEF3;\n    color: #333;\n    text-align: center;\n    line-height: 160px;\n  }\n\n  body > .el-container {\n    margin-bottom: 40px;\n  }\n\n  .el-container:nth-child(5) .el-aside,\n  .el-container:nth-child(6) .el-aside {\n    line-height: 260px;\n  }\n\n  .el-container:nth-child(7) .el-aside {\n    line-height: 320px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Rooms.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-container',[_c('el-aside',{attrs:{\"width\":\"200px\"}},[_c('el-form',{ref:\"form\"},[_vm._v(\"\\n        Create a new room\\n        \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"Create\")])],1)],1)],1),_vm._v(\" \"),_c('el-main',_vm._l((_vm.all_rooms),function(room){return _c('el-col',{key:room},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.my_rooms.indexOf(room) === -1},on:{\"click\":function($event){_vm.enter(room)}}},[_vm._v(_vm._s(room))]),_vm._v(\" \"),(_vm.my_rooms.indexOf(room) !== -1)?_c('el-button',{attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":function($event){_vm.leave(room)}}},[_vm._v(\"Leave Room\")]):_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":function($event){_vm.join(room)}}},[_vm._v(\"Join Room\")])],1)}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-339177d0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Rooms.vue\n// module id = null\n// module chunks = ","<template>\n  <el-container>\n    <el-aside width=\"200px\">\n      <el-button type=\"success\" @click=\"goRooms\" round>Go Back</el-button>\n      <div>Existed room: {{rooms_amount}}</div>\n      <div>Existed user: {{user_amount}}</div>\n    </el-aside>\n    <el-main>\n      <el-table :data=\"logs\" style=\"width: 100%\">\n        <el-table-column prop=\"t\"></el-table-column>\n        <el-table-column prop=\"u\"></el-table-column>\n        <el-table-column prop=\"act\"></el-table-column>\n        <el-table-column prop=\"m\"></el-table-column>\n      </el-table>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import socketio from 'socket.io-client'\n\n  export default {\n    data() {\n//      var socket = socketio('http://localhost:8080');\n      var socket = socketio();\n\n      return {\n        rooms_amount: 0,\n        user_amount: 0,\n        socket: socket,\n        logs:[]\n      };\n    },\n    beforeRouteEnter (to, from, next) {\n      Vue.http.get('/v1/stats')\n        .then(res => {\n          if(res.body.logs && res.body.room && res.body.user){\n            next(vm => vm.setData(res.body));\n          }\n          else {\n            throw new Error('missing info in log object');\n          }\n\n        })\n        .catch(err => {\n          console.log(err);\n          console.log('fetch stats failed!');\n          next('/rooms');\n        })\n    },\n    created() {\n      this.socket.on('stats', (msg) => {\n        let date = new Date(msg.t);\n        msg.t = date.toLocaleString();\n        this.logs.push(msg);\n      });\n    },\n    methods: {\n      goRooms() {\n        this.socket.close();\n        this.$router.replace('/rooms');\n      },\n\n      setData (data) {\n        data.logs.forEach(log => {\n          let date = new Date(log.t);\n          log.t = date.toLocaleString();\n          return log;\n        });\n        this.logs = data.logs;\n        this.rooms_amount = data.room;\n        this.user_amount = data.user;\n      }\n    }\n\n  }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Stats.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-aside',{attrs:{\"width\":\"200px\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.goRooms}},[_vm._v(\"Go Back\")]),_vm._v(\" \"),_c('div',[_vm._v(\"Existed room: \"+_vm._s(_vm.rooms_amount))]),_vm._v(\" \"),_c('div',[_vm._v(\"Existed user: \"+_vm._s(_vm.user_amount))])],1),_vm._v(\" \"),_c('el-main',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.logs}},[_c('el-table-column',{attrs:{\"prop\":\"t\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"u\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"act\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"m\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51803aa1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Stats.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stats.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51803aa1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Stats.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Stats.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nimport Router from 'vue-router'\nimport HelloWorld from '../components/HelloWorld'\nimport ChatPanel from '../components/ChatPanel'\nimport Rooms from '../components/Rooms'\nimport Stats from '../components/Stats'\n\n\nVue.use(VueResource)\nVue.use(Router)\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld,\n      beforeEnter: (to, from, next) => {\n        if(localStorage.getItem('userid')) next('/rooms');\n        else next();\n      }\n    },\n    {\n      path: '/chat',\n      name: 'ChatPanel',\n      component: ChatPanel,\n      beforeEnter: (to, from, next) => {\n        if(!localStorage.getItem('userid')) next('/');\n        if(!localStorage.getItem('current_room')) next('/rooms');\n        else next();\n      }\n    },\n    {\n      path: '/rooms',\n      name: 'Rooms',\n      component: Rooms,\n      beforeEnter: (to, from, next) => {\n        if(!localStorage.getItem('userid')) next('/');\n        else next();\n      }\n    },\n    {\n      path: '/stats',\n      name: 'Stats',\n      component: Stats\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport locale from 'element-ui/lib/locale/lang/en'\n\n\nVue.config.productionTip = false\nVue.use(ElementUI, {locale})\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}